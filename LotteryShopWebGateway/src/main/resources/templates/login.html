<!DOCTYPE html>
<html lang="en">
<head>
<title>RanGO - Contact</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="RanGO Project">
<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 公共style -->
<%
	include("common.css.html"){}
%>
<link rel="stylesheet" type="text/css" href="../styles/contact_styles.css">
<link rel="stylesheet" type="text/css" href="../styles/contact_responsive.css">
</head>
<!-- 公共js -->
<%
	include("common.js.html"){}
%>
<script src="../js/contact_custom.js"></script>
<style>
	.button_parent_div{text-align: center;}
	.button_margin{margin-left: 30px;margin-right: 30px;}
	.a_color{color: #452b78;}
</style>

<body>

<div class="super_container">

	<%
		include("index_top.html"){}
	%>

	<!-- Contact -->

	<div class="contact">
		<div class="container">
			<div class="row contact_row">
				<div class="col-lg-8">
					<!-- Reply -->
					<div class="reply">
                        <input type="hidden" id="rdirect_url" value="${rdirect_url}"/>
						<div class="reply_form_container">
							<!-- Reply Form -->
							<!--<form id="reply_form" action="http://localhost:8083/auth/login" method="post">-->
							<!--<form id="reply_form" action="/authservice/auth/oauth/token" method="post">-->
							<form id="reply_form" action="/authservice/auth/oauth/token" method="post">
							<!--<form id="reply_form" action="/authservice/auth/login" method="post">-->
							<!--<form id="reply_form" action="/authservice/auth/custom/authorize" method="post">-->
								<input type="hidden" name="grant_type" value ="password"/>
								<input type="hidden" name="client_id" value ="${client_id}"/>
								<input type="hidden" name="client_secret" value ="${client_secret}"/>
								<div>
									<input  name="username" id="reply_form_email" class="input_field reply_form_email" type="text" placeholder="E-mail" required="required" data-error="Wrong username and password.">
									<input  name="password" id="reply_form_password" class="input_field reply_form_password" type="password" placeholder="password" required="required" data-error="Wrong username and password.">
								</div>
								<div class="button_parent_div">
									<button type="button" onclick="login()" class="button_margin reply_submit_btn trans_300">
										Login
									</button>
									<button type="button" class="button_margin reply_submit_btn trans_300">
										<a class="a_color" href="./register">Register</a>
									</button>
									<div class="button_parent_div">
										<span ><a class="a_color" href="#">Forgot Password</a></span>
									</div>
								</div>
							</form>
						</div>
					</div>
                    <!--<form id="testPost" action="/web2/testPost" method="post">
						&lt;!&ndash;&ndash;&gt;
						<input type="text" name="access_token" value="bae582fc-f5b5-4cad-83d4-2c821a4a6848"/>
                        <input type="text" name="name"/>
                        <input type="text" name="sex"/>
                        <button type="submit" class="button_margin reply_submit_btn trans_300">
                            submit测试post请求是否验证通过，需删除
                        </button>
						<button type="button" onclick="testPost()" class="button_margin reply_submit_btn trans_300">
							ajax测试post请求是否验证通过，需删除
						</button>
                    </form>-->
				</div>
		</div>
	</div>

	<!-- Footer -->

	<%
		include("bottom.html"){}
	%>

</div>

	<script type="text/javascript">
		/*$(function () {
			$(document).ajaxSend(function(e, xhr, options) {
				////options.data.put({"access_token":"bae582fc-f5b5-4cad-83d4-2c821a4a6848"});
				// var dataStr = options.data;
				// if(dataStr){
				// 	dataStr = dataStr+"&access_token="+"bae582fc-f5b5-4cad-83d4-2c821a4a6848";
				// }else{
				// 	dataStr = "access_token="+"bae582fc-f5b5-4cad-83d4-2c821a4a6848";
				// }
				// options.data = dataStr;
				// xhr.setRequestHeader("access_token", "bae582fc-f5b5-4cad-83d4-2c821a4a6848");
			});
		});*/

		/*function testPost(){
			$.ajax({
				url:"/web2/testPost",
				data:{'name':'CHJ李艳龙','sex':1},
				type:"post",
				dataType:"text",
				success:function(data){
					console.log(data);
				},
				error:function(){
					alert("User or password error!")
				}
			});
		}*/
		function login(){
			$.ajax({
				url:"/authservice/auth/oauth/token",
				data:$('#reply_form').serializeArray(),
				type:"post",
				dataType:"json",
				success:function(data){
					window.location.href = "/loginSession?access_token="+data.access_token+"&accessToken="+data.access_token+"&rdirectUrl="+$('#rdirect_url').val();
				},
				error:function(){
					alert("User or password error!")
				}
			});
		}
	</script>
<script src="../js/contact_custom.js"></script>
</div>
</body>

</html>