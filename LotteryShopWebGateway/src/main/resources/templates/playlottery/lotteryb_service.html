<!DOCTYPE html>
<html lang="en">
<head>
    <!-- commonality  meta and title -->
    <%
    include("../common/common.meta.html"){}
    %>
    <!-- commonality style -->
    <%
    include("../common/common.css.html"){}
    %>
    <link rel="stylesheet" type="text/css" href="../styles/portfolio_styles2.css">
    <link rel="stylesheet" type="text/css" href="../styles/portfolio_responsive2.css">
    <link rel="stylesheet" type="text/css" href="../styles/main_styles1.css">
    <link rel="stylesheet" type="text/css" href="../styles/responsive2.css">
    <link rel="stylesheet" type="text/css" href="../styles/lottery_service_1.css">
    <style>
        .service_item_title{
            width: 49%;
            float: left;
            border-radius: 5px;
            margin: 2px;
            background: #f1f1f1;/*f9c6c9*/
        }
        .service_item_title_left{
            height: 110px;
        }
        .service_item_title_right{
            height: 110px;
            float: right!important;
            margin-right: 0px!important;
        }
        .service_item_title_name{
            width: 100%!important;
        }
        .service_item_content_body{
            float: left;
            width: 100%;
            text-align: center;
            background: #f1f1f1;
            border-radius: 5px;
        }

        .item_block{
            display: inline-block;
            font-size: 28px;
            border: solid 1px #ccc;
            line-height: 75px;
            border-radius: 5px;
            margin: 3px;
            cursor: pointer;
        }
        .item_block_font_size{
            line-height: 70px;
        }
        .span_font_size{
            font-size: 26px;
        }
        .service_item_content_type{
            float: left;
            background: #eee;
            margin-bottom: 3px;
            width: 100%;
            border-radius: 5px;
        }
        .service_item_content_type_value{
            border-radius: 3px;
            margin-left: 3px;
            margin-top: 3px;
            background: #eee;
            width: 99%;
        }
        .service_item_content_buyList{
            float: left;
            width: 100%;
            background: #eee;
            border-radius: 5px;
            margin-top: 3px;
        }
        .service_item_content_btn{
            float: left;
            width: 100%;
            background: #f1f1f1;
            margin-top: 3px;
            border-radius: 5px;
        }
        .item_block:hover{
            background: #9f88be;
            color: white!important;
        }
        .item_block:hover p{
            color: white;
        }
        .item_block_checked{
            background: #9f88be;
        }
        .item_block_checked p{
            color: white;
        }
        .service_item_content_buyList_ul{
            padding: 5px;
            min-height: 100px;
            max-height: 190px;
            overflow: auto;
        }
        .service_item_content_buyList_ul::-webkit-scrollbar {/*滚动条整体样式*/
            width: 2px;     /*高宽分别对应横竖滚动条的尺寸*/
            height: 1px;
        }
        .service_item_content_buyList_ul::-webkit-scrollbar-thumb {/*滚动条里面小方块*/
            border-radius: 2px;
            -webkit-box-shadow: inset 0 0 2px rgba(0,0,0,0.2);
            background: #dddddd;
        }
        .service_item_content_buyList_ul::-webkit-scrollbar-track {/*滚动条里面轨道*/
            -webkit-box-shadow: inset 0 0 2px rgba(0,0,0,0.2);
            border-radius: 2px;
            background: #EDEDED;
        }
        .service_item_content_buyList_ul{
            padding: 5px;
            min-height: 100px;
            max-height: 190px;
            overflow: auto;
        }
        .service_item_content_buyList_ul_li{
            text-align: left;
            margin-left: 3px;
            border-bottom: solid 1px white;
            color: #9f88be;
        }
        .service_item_content_recode_ul::-webkit-scrollbar {/*滚动条整体样式*/
            width: 2px;     /*高宽分别对应横竖滚动条的尺寸*/
            height: 1px;
        }
        .service_item_content_recode_ul::-webkit-scrollbar-thumb {/*滚动条里面小方块*/
            border-radius: 2px;
            -webkit-box-shadow: inset 0 0 2px rgba(0,0,0,0.2);
            background: #dddddd;
        }
        .service_item_content_recode_ul::-webkit-scrollbar-track {/*滚动条里面轨道*/
            -webkit-box-shadow: inset 0 0 2px rgba(0,0,0,0.2);
            border-radius: 2px;
            background: #EDEDED;
        }
        .service_item_content_recode_ul{
            padding: 5px;
            min-height: 100px;
            max-height: 190px;
            overflow: auto;
        }
        .service_item_content_recode_ul_li{
            text-align: left;
            margin-left: 3px;
            border-bottom: solid 1px white;
            color: #9f88be;
        }
        .span_right{
            margin-right: 30px;
        }
        .li_item{

        }
        .type_name{
            width: 100%;
        }
        .li_item_block{
            display: inline-block;
        }
        .type_other{

        }
        .type_num{
            width: 20%;
        }
        .type_money{
            width: 35%;
        }
        .input_money{
            border: none;
            border-bottom: solid 1px;
            width: 80px;
            height: 25px;
            background: #eee;
            text-align: center;

        }
        .input_money::-webkit-outer-spin-button,
        .input_money::-webkit-inner-spin-button {
            -webkit-appearance: none;
        }
        .input_money[type="number"]{
            -moz-appearance: textfield;
        }
        .type_compensate{
            width: 30%;
        }
        .type_btn{
            width: 12%;
        }
        .a_delete{
            cursor: pointer;
            /*color: red!important;*/
        }
        .model_purchase_button_1{
            top: 0!important;
        }
        .button_purchase{
            width: inherit;
        }
        .compensate_value{

        }
        .service_item_content_btn_all_data{
            text-align: center;
        }
        .color_red{
            color: red;
        }
        .receive_content_list{

        }
        .lotterybName{

        }
        .lotterybIssue{

        }
        .receive_content_list{
            height: 150px!important;
            border: solid 1px #eee;
            border-radius: 3px;
            border-top:none ;
        }
        .receive_content_list li{
            border: solid 1px snow;
            text-align: left;
            margin-left: 5px;
        }
        .total{
            background: white;
        }
        .lottery_service_lottery_animation{
            margin-top: -10px;
        }
        .lottery_service_lottery_animation li{
            display: inline-block;
        }
        .lottery_service_lottery_num{
            margin-top: -15px;
        }
        .lottery_service_lottery_num li{
            width: 60px;
            height: 60px;
            line-height: 60px;
            text-align: center;
            margin: 19px 22px 0 0;
            display: inline-block;
            background: url("../images/lotteryb/open_num.png")no-repeat center 0;
        }
        .lottery_service_lottery_record_num{
            margin-top: -15px;
        }
        .lottery_service_lottery_record_num li{
            width: 30px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            margin: 19px 22px 0 0;
            display: inline-block;
            background: url("../images/lotteryb/open_num_1.png")no-repeat center 0;
        }
        .announcedNo1{
            background-position: 0 0;
        }
        .announcedNo2{
            background-position: 0 -61px!important;
        }
        .announcedNo3{
            background-position: 0 -122px!important;
        }
        .announcedNo4{
            background-position: 0 -183px!important;
        }
        .announcedNo5{
            background-position: 0 -244px!important;
        }
        .announcedNo6{
            background-position: 0 -305px!important;
        }
        .announcedNo1_1{
            background-position: 0 0;
        }
        .announcedNo2_2{
            background-position: 0 -31px!important;
        }
        .announcedNo3_3{
            background-position: 0 -62px!important;
        }
        .announcedNo4_4{
            background-position: 0 -93px!important;
        }
        .announcedNo5_5{
            background-position: 0 -124px!important;
        }
        .announcedNo6_6{
            background-position: 0 -155px!important;
        }
        .em_time{
            width: 165px;
            letter-spacing: 2px;
        }
        .service_item_title_rule{
            text-align: center;
        }
        .service_item_title_draw{
            text-align: center;
        }
        .lottery_play_div_recode{
            display: inline-block;
        }
        .lottery_play_div_recode_1{

        }
        .lottery_play_div_recode_2{
            width: 150px;
        }
        .lottery_play_div_recode_3{
            width: 150px;
        }
        .lottery_play_div_recode_4{
            width: 300px;
        }
        .p_content_center_left{
            float: none;

        }
        .p_content_center_issue{
            text-align: left!important;
        }
        .service_item_content_type_value_text_p{
            margin: 3px;
        }
        .portfolio_category{
            margin-left: 20px;
            margin-right: 20px;
        }
        .service_item_content_recode_list{
            float: left;
            width: 100%;
            margin-top: 3px;
            margin-bottom: 100px;
            background: #f1f1f1;
        }
    </style>
</head>
<!-- commonality js -->
<%
include("../common/common.js.html"){}
%>
<script src="../js/portfolio_custom.js"></script>
<script>
    var type_4 = new Array(1,4,10,20);
    var type_8 = new Array(1,3,6,10,15);
    var whetherLogin = '${whetherLogin}';
    window.onload = function(){
        lotterybBuyRecodeFind("service_item_content_recode_list",true);
    }
    $(function(){
        var language = getLanguage();
        var lotterybInfoId = '${playTypeId!""}';
        if(whetherLogin == 'true'){
            findLsb();
        }
        initInfo(lotterybInfoId,language,'false');
        initInfoUp(lotterybInfoId);
        initConfig(language,1);
        findLotteryIssue("the_lottery_record_id",true);
        findRule();
        $(".lotteryPlay_li").click();

        $("#subbutton_confirm").click(function(){
            subbutton_confirm();
        });
        $("#button_purchase").click(function(){
            button_purchase();
        });
        $(".ul_draw_archive").scroll(function(){
            var $this =$(this),
                viewH =$(this).height(),
                contentH =$(this).get(0).scrollHeight,
                scrollTop =$(this).scrollTop();
            if(scrollTop/(contentH -viewH) >= 0.95){
                findLotteryIssue("the_lottery_record_id",false);
            }
        });
        $(".service_item_content_recode_list").scroll(function(){
            var $this =$(this),
                viewH =$(this).height(),
                contentH =$(this).get(0).scrollHeight,
                scrollTop =$(this).scrollTop();
            if(scrollTop/(contentH -viewH) >= 0.95){
                lotterybBuyRecodeFind("service_item_content_recode_list",false);
            }
        });
        $(".back").click(function(){
            history.back();
        });
    });

    function initInfoUp(lotterybInfoId){
        $.ajax({
            url:'${projectPath}/apiauthorization/lotteryB/authorization/v1/findLotterybIssueUp',
            type:'get',
            data:{"lotterybInfoId":lotterybInfoId},
            dataType:"json",
            success:function (result) {
                var dataInfo = result.extend.data;
                if(dataInfo){
                    $(".last_number_of_periods").html(dataInfo.issueNum);
                    var luckNum = dataInfo.luckNum;
                    if(luckNum){
                        $(".lottery_service_lottery_num").show();
                        $(".lottery_service_lottery_animation").hide();
                        var num = luckNum.split(",");
                        var ul = $(".lottery_service_lottery_num");
                        ul.empty();
                        $.each(num,function(index,data){
                            ul.append("<li class='announcedNo"+num[index]+"'></li>");
                        })
                    }else {
                        initInfoUp(lotterybInfoId);
                    }
                }
            }
        });
    }
    var setIntervalId;
    function initInfo(lotterybInfoId,language,flag){
        $.ajax({
            url:'${projectPath}/apiauthorization/lotteryB/authorization/v1/findLotterybInfo',
            type:'get',
            data:{"lotterybInfoId":lotterybInfoId},
            dataType:"json",
            success:function (result) {
                initInfoUp(lotterybInfoId);
                lotterybBuyRecodeFind("service_item_content_recode_list",true);
                var dataInfo = result.extend.data;
                if(language == 'en'){
                    $(".lottery_title").html(dataInfo.enTitle);
                }
                if(language == 'zh'){
                    $(".lottery_title").html(dataInfo.zhTitle);
                }
                $(".lottery_service_time").attr("nowTime",dataInfo.newDate);
                $(".lottery_service_time").attr("startTime",dataInfo.startDate);
                $(".lottery_service_time").attr("endTime",dataInfo.endDate);
                var stopTime= new Date($(".lottery_service_time").attr("endTime"));
                var today= new Date($(".lottery_service_time").attr("nowTime"));
                var seconds = parseInt((stopTime.getTime() - today.getTime())/1000);
                clearInterval(setIntervalId);
                setIntervalId =  setInterval(function(){
                                                        countDown(seconds);
                                                        seconds = seconds - 1;
                                                        $(".now_number_of_periods").html(dataInfo.issueNum);
                                                    },1000);
                if(flag == 'true'){
                    if(dataInfo.issueNum != $(".now_number_of_periods").html().replace(/\s+/g,"")){
                        $(".last_number_of_periods").html($(".now_number_of_periods").html());
                    }
                }
            }
        });
    }

    function initConfig(language,type){
        $.ajax({
            url:'${projectPath}/apiauthorization/lotteryB/authorization/v1/findLotterybConfig',
            type:'get',
            data:{"type":type},
            dataType:"json",
            success:function (result) {
                var dataInfo = result.extend.data;
                var subblock = $(".service_item_content_subblock");
                subblock.html("");
                $.each(dataInfo,function (index,data){
                    var value = data.enTitle;
                    if(language == 'zh'){
                        value = data.zhTitle;
                    }
                    var div_ = '<div dataId = "'+data.id+'" lines = "'+data.lines+'" dataValue="'+value+'" group="'+(data.group || "")+'" class="item_block item_block_'+type+'">';
                    if(type == 1){
                        div_ += '<p><span class="span_font_size">'+value+'</span></p>' +
                            '<p><span>'+data.lines+'</span></p>';
                    }else {
                        div_ += '<p><span class="item_block_font_size span_font_size">'+value+'</span></p>';
                    }
                    div_ += '</div>';
                    subblock.append(div_);
                })
                if(type == 1 || type == 2 || type == 5){
                    var ur = $(".service_item_content_buyList_ul");
                    writeBack(type);
                    $(".service_item_content_subbutton").hide();
                }
                if(type == 3 || type == 4 ||  type == 6 || type == 7 || type == 8){
                    $(".service_item_content_subbutton").show();
                    $("#subbutton_confirm").attr("lotterybcofigids","");
                    $("#subbutton_confirm").attr("lotterybcofigname","");
                    $("#subbutton_confirm").attr("lines","");
                    $("#subbutton_confirm").attr("type","");
                    $("#subbutton_confirm").attr("num","");
                    $("#subbutton_confirm").attr("num_2","");
                }
                item_block_checked(type);
            }
        })
    }

    function findRule(){
        var playType = '${playType}' || "";
        var languageType = getLanguage();
        if(languageType != 'zh'){
            languageType = 'en';
        }
        $.ajax({
            url:'${projectPath}/apiauthorization/base/authorization/v1/baseInfo/findPlayTypeRule',
            type:'get',
            data:{"playType":playType,"languageType":languageType},
            dataType:"json",
            success:function (result) {
                $.each(result,function(index,data){
                    $("#rules_content").html(data.content);
                })
            }
        })
    }

    function item_block_checked(type){
        $(".item_block").on("click",function(){
            var lotterybConfigId = $(this).attr("dataId");
            var typeName = $(this).attr("dataValue");
            var lines = $(this).attr("lines");
            var isChecked = $(this).attr("ischecked") || 'false';
            var num = $(this).attr("num") || 1;
            var num_2 = $(this).attr("num_2") || 1;
            if(isChecked == 'true'){
                $(this).attr("ischecked",'false');
                $(this).removeClass("item_block_checked");
                //TODO
                if(type == "1" || type == "2" || type == "5"){
                    list_1_delete($(this).attr("dataId"));
                }
                if(type == '3' || type == '4' || type == '6' || type == '7' || type == '8'){
                    //replace
                    var oldLotterybConfigIds = $("#subbutton_confirm").attr("lotterybcofigids");
                    var oldLotterybConfigNames = $("#subbutton_confirm").attr("lotterybcofigname");
                    var oldNum = $("#subbutton_confirm").attr("num");
                    var oldNum_2 = $("#subbutton_confirm").attr("num_2");
                    oldLotterybConfigIds = oldLotterybConfigIds.replace(","+lotterybConfigId,"");
                    oldLotterybConfigNames = oldLotterybConfigNames.replace(","+typeName,"");
                    $("#subbutton_confirm").attr("lotterybcofigids",oldLotterybConfigIds);
                    $("#subbutton_confirm").attr("lotterybcofigname",oldLotterybConfigNames);
                    if(type == '7'){
                        var groupId = $(this).attr("group");
                        if(typeName.length > 1){
                            var oldNum = $("#subbutton_confirm").attr("num") || 0;
                            $("#subbutton_confirm").attr("num",oldNum > 1 ? oldNum - 1:0);
                        }else {
                            var oldNum_2 = $("#subbutton_confirm").attr("num_2") || 0;
                            $("#subbutton_confirm").attr("num_2",oldNum_2 > 1 ? oldNum_2 - 1:0);
                        }
                        $("#subbutton_confirm").attr("group_"+groupId,"");
                        $("#subbutton_confirm").attr("group_config_"+groupId,"");
                    }
                    if(type == '3' || type == '4' || type == '8'){
                        $("#subbutton_confirm").attr("num",oldNum > 1 ? oldNum - 1:0);
                    }
                }
            }else {
                $(this).attr("ischecked",'true');
                $(this).addClass("item_block_checked");
                if(type == '1' || type == '2' || type == '5'){
                    list_1_add(lotterybConfigId,typeName,lines,type,num,num_2);
                }
                if(type == '3' || type == '4' || type == '6' || type == '7' || type == '8'){
                    $("#subbutton_confirm").attr("lines",lines);
                    $("#subbutton_confirm").attr("type",type);
                    if(type == '7'){
                        var groupId = $(this).attr("group");
                        var oldGroupId = $("#subbutton_confirm").attr("group_"+groupId) || "";
                        if(oldGroupId != ""){
                            var oldLotterybConfigId = $("#subbutton_confirm").attr("group_config_"+groupId);
                            $("#subbutton_confirm").attr("group"+"_"+groupId,groupId);
                            $("#subbutton_confirm").attr("group_config_"+groupId,lotterybConfigId);
                            $(".service_item_content_subblock").find("div[dataid="+oldLotterybConfigId+"]").removeClass("item_block_checked");
                            $(".service_item_content_subblock").find("div[dataid="+oldLotterybConfigId+"]").attr("ischecked",'false');
                            if(typeName.length > 1){
                                var oldNum_2 = $("#subbutton_confirm").attr("num_2") || 0;
                                $("#subbutton_confirm").attr("num_2",(parseInt(oldNum_2) - 1));
                            }else {
                                var oldNum = $("#subbutton_confirm").attr("num") || 0;
                                $("#subbutton_confirm").attr("num",(parseInt(oldNum) - 1));
                            }
                        }else {
                            $("#subbutton_confirm").attr("group_"+groupId,groupId);
                            $("#subbutton_confirm").attr("group_config_"+groupId,lotterybConfigId);
                        }
                        if(typeName.length > 1){
                            var oldNum = $("#subbutton_confirm").attr("num") || 0;
                            $("#subbutton_confirm").attr("num",(parseInt(oldNum) + 1));
                        }else {
                            var oldNum_2 = $("#subbutton_confirm").attr("num_2") || 0;
                            $("#subbutton_confirm").attr("num_2",(parseInt(oldNum_2) + 1));
                        }
                    }
                    if(type == '3' || type == '4' || type == '6' || type == '8'){
                        var oldLotterybConfigIds = $("#subbutton_confirm").attr("lotterybcofigids") || "";
                        var oldLotterybConfigNames = $("#subbutton_confirm").attr("lotterybcofigname") || "";
                        $("#subbutton_confirm").attr("lotterybcofigids",oldLotterybConfigIds+","+lotterybConfigId);
                        $("#subbutton_confirm").attr("lotterybcofigname",oldLotterybConfigNames+","+typeName);
                        var oldNum = $("#subbutton_confirm").attr("num") || 0;
                        $("#subbutton_confirm").attr("num",(parseInt(oldNum) + 1));
                    }
                }
            }
        });
    }

    function select_type(){
        var select_obj = $(".service_item_content_type_value");
        initConfig(getLanguage(),select_obj.val());
        $(".service_item_content_type_value_text").find(".service_item_content_type_value_text_p").hide();
        $(".service_item_content_type_value_text").find("p[type="+select_obj.val()+"]").show();
    }

    function list_1_add(lotterybConfigId,typeName,lines,type,num,num_2){
        var type_val = $(".service_item_content_type_value").val();
        var type_text = $(".service_item_content_type_value").find("option[value="+type_val+"]").html();
        var ul = $(".service_item_content_buyList_ul");
        var li = ul.find("li").first().clone();
        li.show();
        li.attr("lines",lines);
        li.find(".type_name").html("["+type_text+"]" + typeName);
        li.attr("lotterybconfigid",lotterybConfigId);
        li.attr("type",type);
        li.find(".input_money").val("0");
        li.find(".compensate_value").html("0.0");
        if(type == '7'){
            li.find(".num_value").html(new Decimal(num).mul(new Decimal(num_2)));
            calculateNumberAll(new Decimal(num).mul(new Decimal(num_2)),'1');
        }else {
            li.find(".num_value").html(num);
            calculateNumberAll(num,'1');
        }
        ul.prepend(li);
    }

    function list_1_delete(lotterybConfigId){
        var ul = $(".service_item_content_buyList_ul");
        var li = ul.find("li[lotterybconfigid="+lotterybConfigId+"]");
        var total = li.find(".compensate_value").html() || "0";
        var number = li.find(".num_value").html() || "0";
        calculateMoneyAll(total,'2');
        calculateNumberAll(number,'2');
        li.remove();
    }

    function a_delete(e){
        var li = $(e).parents("li");
        var lotterybConfigId = li.attr("lotterybconfigid");
        if(lotterybConfigId.indexOf(",") == -1){
            $(".service_item_content_subblock").find("div[dataId="+lotterybConfigId+"]").removeClass("item_block_checked");
        }
        var total = li.find(".compensate_value").html().replace(/\s+/g,"") || "0";
        var number = li.find(".num_value").html().replace(/\s+/g,"") || "0";
        li.remove();
        calculateNumberAll(number,'2');
        calculateMoneyAll(total,'2');
    }

    function writeBack(type){
        var ur = $(".service_item_content_buyList_ul");
        var subblock = $(".service_item_content_subblock");
        if(type == '1' || type == 1 ||
        type == '2' || type == 2 ||
        type == '5' || type == 5){
            ur.find("li[type="+type+"]").each(function(index,data){
                var lotterybConfigId = $(data).attr("lotterybconfigid");
                subblock.find("div[dataid="+lotterybConfigId+"]").addClass("item_block_checked");
                subblock.find("div[dataid="+lotterybConfigId+"]").attr("ischecked",'true');
            })
        }
    }

    function findLsb(){
        $.ajax({
            url: "/api/base/v1/lsbWallet/findLsbWallet",
            type: 'post',
            dataType: "json",
            success: function (result) {
                if(result.code == 200){
                    var dataInfo = result.extend.data;
                    $("#availableBalance").attr("balance",dataInfo.balance);
                }
            }
        })
    }

    var layer_buy;
    function button_purchase(){
        var language = getLanguage();
        var allTotal = $(".service_item_content_btn_all_data").find(".all_total").html();
        var availableBalance = $("#availableBalance").attr("balance");
        if(whetherLogin == 'false'){
            if(language == "zh"){
                layer.msg("请登录 !");
            }else {
                layer.msg("please log in !");
            }
            return;
        } else if(parseFloat(availableBalance) < parseFloat(allTotal)){
            //TODO
            if(language == "zh"){
                layui_open("账户余额不足，请先充值 !");
            }else {
                layui_open("Account balance is insufficient, please recharge first !");
            }
            //TODO return;
        }
        var lotterybName = $(".service_item_title_name").find(".lottery_title").html();
        var lotterybIssue = $(".service_item_title_left").find(".now_number_of_periods").html();
        $(".layer_open_to_receive").find(".lotterybName").html(lotterybName);
        $(".layer_open_to_receive").find(".lotterybIssue").html(lotterybIssue);
        $(".layer_open_to_receive").find(".layer_allTotal").find(".total").html(allTotal);
        var ul = $(".service_item_content_buyList_ul");
        var layer_ul = $(".receive_content_list");
        layer_ul.html("");
        var index_read = -1;
        var flag = true;
        ul.find("li").each(function(index,data){
            var type = $(data).attr("type");
            if(type == '-1'){
                return;
            }
            var lotterybCongfig = $(data).attr("lotterybconfigid");
            var dataInfo = $(data).find(".type_name").html();
            var inputMoney = $(data).find(".input_money").val();
            var number = $(data).find(".num_value").html();
            if(parseInt(inputMoney) <= 0){
                flag = false;
            }
            var li = "<li><p money='"+inputMoney+"' lotterybInfo='"+lotterybCongfig+"' type='"+type+"' number='"+number+"'>"+dataInfo+"</p></li>";
            layer_ul.append(li);
            index_read = index;
        });
        if(!flag){
            if(language == 'zh'){
                layui_open("您有号码未设置金额，请核对后操作！");
            }else {
                layui_open("You have a number and the amount is not set, please check it and operate !");
            }
            return;
        }
        if(index_read < 0){
            if(language == 'zh'){
                layui_open("您还没有选择！");
            }else {
                layui_open("You have not yet chosen !");
            }
            return;
        }
        var width = document.body.clientWidth;
        var area = ["30%","400px"];
        if(width < 991){
            width = document.body.clientWidth;
            area = ["95%","400px"]
        }
        layer_buy = layer.open({
            type: 1,
            title: false,
            shadeClose: true,
            scrollbar:false,
            area:area,
            skin: 'layer_receive_list',
            content: $(".layer_open_to_receive").html()
        });
    }

    function calculateMoney(e){
        var li = $(e).parents("li");
        var lines = li.attr("lines");
        var money = $(e).val();
        var compensate = li.find(".compensate_value");
        lines = parseFloat(lines);
        money = parseInt(money)
        if(money < 1){
            return;
        }
        $(e).val(money);
        var total = new Decimal(lines).mul(new Decimal(money)).toNumber();
        if(!total){
            total = "0.0";
        }
        compensate.html(total);
        calculateMoneyAll(total.toString(),'1');
    }

    function calculateMoneyAll(total,type){
        var dataAllInfo = $(".service_item_content_btn_all_data");
        var oldTotal = dataAllInfo.find(".all_total").html() || "0";
        var ul = $(".service_item_content_buyList_ul");
        var allTotal = 0;
        ul.find("li").each(function(index,data){
            var total = $(data).find(".input_money").val().toString().replace(/\s+/g,"") || 0;
            var number = $(data).find(".num_value").html().toString().replace(/\s+/g,"") || "0";
            total = new Decimal(total).mul(new Decimal(number)).toNumber()
            allTotal = new Decimal(allTotal).add(new Decimal(total)).toNumber();
        });
        dataAllInfo.find(".all_total").html(allTotal);
    }

    function calculateNumberAll(number,type){
        var dataAllInfo = $(".service_item_content_btn_all_data");
        var oldNumber = dataAllInfo.find(".number").html().replace(/\s+/g,"") || "0";
        if(type == '1'){
            oldNumber = new Decimal(oldNumber).add(new Decimal(number));
        }
        if(type == '2'){
            oldNumber = new Decimal(oldNumber).sub(new Decimal(number));
        }
        dataAllInfo.find(".number").html(oldNumber.toString());
    }

    function subbutton_confirm(){
        var language = getLanguage();
        var type_val = $(".service_item_content_type_value").val();
        var type_text = $(".service_item_content_type_value").find("option[value="+type_val+"]").html();
        var lotterybcofigids = $("#subbutton_confirm").attr("lotterybcofigids") || "";
        var lotterybcofignames = $("#subbutton_confirm").attr("lotterybcofigname") || "";
        var num = $("#subbutton_confirm").attr("num").replace(/\s+/g,"") || 0;
        var num_2 = $("#subbutton_confirm").attr("num_2").replace(/\s+/g,"") || 0;
        var type = $("#subbutton_confirm").attr("type");
        if(type == '4' || type == '7' || type == '8'){
            var length = (lotterybcofigids.substring(1)).split(",");
            if(type == '4'){
                if(length.length < 3){
                    if(language == 'zh'){
                        layui_open("号码不完整，请重新选择！");
                    }else {
                        layui_open("The number is not complete, please choose again !");
                    }
                    return;
                }
            }
            if(type == "8"){
                if(length.length < 2){
                    if(language == 'zh'){
                        layui_open("号码不完整，请重新选择！");
                    }else {
                        layui_open("The number is not complete, please choose again !");
                    }
                    return;
                }
            }
            if(type == '7'){
                if(parseInt(num) == 0 || parseInt(num_2) == 0){
                    if(language == 'zh'){
                        layui_open("号码不完整，请重新选择！");
                    }else {
                        layui_open("The number is not complete, please choose again !");
                    }
                    return;
                }
            }
        }
        if(type == '4'){
            if(parseInt(num) == 3){
                num = type_4[0]
            }else if(parseInt(num) == 4){
                num = type_4[1]
            }else if(parseInt(num) == 5){
                num = type_4[2]
            }else if(parseInt(num) == 6){
                num = type_4[3]
            }
        }
        if(type == '8'){
            if(parseInt(num) == 2){
                num = type_8[0]
            }else if(parseInt(num) == 3){
                num = type_8[1]
            }else if(parseInt(num) == 4){
                num = type_8[2]
            }else if(parseInt(num) == 5){
                num = type_8[3]
            }else if(parseInt(num) == 6){
                num = type_8[4]
            }
        }
        if(type == '7'){
            lotterybcofigids = "";
            lotterybcofignames = "";
            $(".service_item_content_subblock").find(".item_block_checked").each(function(index,data){
                if(lotterybcofigids){
                    lotterybcofigids += ","+$(data).attr("dataid");
                }else {
                    lotterybcofigids = $(data).attr("dataid");
                }
                if(lotterybcofignames){
                    lotterybcofignames += "," + $(data).attr("datavalue");
                }else {
                    lotterybcofignames =$(data).attr("datavalue");
                }
            });
        }else {
            lotterybcofigids = lotterybcofigids.substring(1);
            lotterybcofignames = lotterybcofignames.substring(1);
        }

        var lines = $("#subbutton_confirm").attr("lines");
        var ul = $(".service_item_content_buyList_ul");
        var li = ul.find("li").first().clone();
        li.show();
        li.attr("lines",lines);
        li.find(".type_name").html("["+type_text+"]" + lotterybcofignames);
        li.attr("lotterybconfigid",lotterybcofigids);
        li.attr("type",type);
        li.find(".input_money").val("0");
        li.find(".compensate_value").html("0.0");
        if(type == '7'){
            li.find(".num_value").html(parseInt(num)*parseInt(num_2));
            calculateNumberAll(parseInt(num)*parseInt(num_2),'1');
        }else {
            li.find(".num_value").html(num);
            calculateNumberAll(num,'1');
        }
        ul.prepend(li);
        $(".service_item_content_subblock").find(".item_block").removeClass("item_block_checked");
        $(".service_item_content_subblock").find(".item_block").attr("ischecked",'false');
        $("#subbutton_confirm").attr("lotterybcofigids","");
        $("#subbutton_confirm").attr("lotterybcofigname","");
        $("#subbutton_confirm").attr("lines","");
        $("#subbutton_confirm").attr("type","");
        $("#subbutton_confirm").attr("num","");
        $("#subbutton_confirm").attr("num_2","");
        if(type == '7'){
            for(var i = 0; i < 7 ; i++){
                $("#subbutton_confirm").attr("group_config_"+i,"");
                $("#subbutton_confirm").attr("group_"+i,"");
            }
        }
    }

    function countDown(seconds){
        var language = getLanguage();
        var lotterybInfoId = '${playTypeId!""}';
        if(seconds >= 0){//start period
            $(".time_hour").html("00"+":"+PrefixInteger(parseInt(seconds/60),2)+":"+PrefixInteger(seconds%60,2));
        }
        if(seconds <= 0){
           $(".lottery_service_lottery_animation").show();
            $(".lottery_service_lottery_num").hide();
        }
        var periodDate = $(".lottery_service_time").attr("periodDate") || 0;
        if(seconds <= 0){
            initInfo(lotterybInfoId,language,'true');
        }
    }

    function paymentCodeConfirm(){
        var layer_obj = $(".layer_receive_list");
        var issue = layer_obj.find(".lotterybIssue").html();
        var lotterybInfoId = layer_obj.find(".lotterybInfoId").attr("lotterybinfoid");
        var total = layer_obj.find(".layer_allTotal").find(".total").html() || "";
        var dataInfo = "";
        layer_obj.find("ul").find("li").each(function(idnex,data){
            var lotterybConfig = $(data).find("p").attr("lotterybinfo");
            var type = $(data).find("p").attr("type");
            var money = $(data).find("p").attr("money");
            var number = $(data).find("p").attr("number");
            if(dataInfo){
                dataInfo += ",{\"lotterybConfig\":\""+lotterybConfig+"\""+",\"type\":\""+type+"\""+",\"money\":\""+money+"\""+",\"number\":\""+number+"\"}";
            }else {
                dataInfo += "{\"lotterybConfig\":\""+lotterybConfig+"\""+",\"type\":\""+type+"\""+",\"money\":\""+money+"\""+",\"number\":\""+number+"\"}";;
            }
        })
        dataInfo = "["+dataInfo+"]";
        var index_record = layer.load(3,{shade: [0.8, '#393D49']});
        $.ajax({
            url:'/api/lotteryB/v1/lotteryB/buyLotteryb',
            type:'get',
            data:{"issueNum":issue,"lotterybInfoId":lotterybInfoId,"total":total,"dataInfo":dataInfo},
            dataType:"json",
            success:function (result) {
               layer.close(index_record);
               layer.close(layer_buy);
               if(result.code == 500){
                   layui_open(result.msg);
               }else if(result.code == 200){
                   lotterybBuyRecodeFind("service_item_content_recode_list",true);
                   layer.msg(result.msg);
                   $(".service_item_content_buyList_ul ").find("li").each(function(index,data){
                        var type = $(data).attr("type");
                        if(type != "-1"){
                            $(data).find(".a_delete").click();
                        }
                   });
               }
            }
        })
    }

    function findLotteryIssue(dataId,flag){
        var dataObj = $("#"+dataId);
        var lotterybInfoId = '${playTypeId!""}';
        var currentPage = dataObj.attr("currentPage") || 1;
        var pageSize = dataObj.attr("pageSize") || 20;
        var isFind = dataObj.attr("isFind") || "true";
        var isRepetition = dataObj.attr("isRepetition") || "true";
        var ul = dataObj.find("ul:first");
        var li = ul.find("li:first-child");
        var languageType = getLanguage();
        if(languageType != 'zh'){
            languageType = 'en';
        }
        if(flag){
            currentPage = dataObj.attr("currentPage",1);
            pageSize = dataObj.attr("pageSize",20);
            currentPage = 1;
            pageSize = 20;
            ul.html("");
        }
        if(isRepetition == 'true'){
            dataObj.attr("isRepetition",'false');
            $.ajax({
                url: '${projectPath}/apiauthorization/lotteryB/authorization/v1/getLotteryIssue',
                type: 'get',
                data: {"currentPage": currentPage, "pageSize": pageSize, "lotterybInfoId": lotterybInfoId},
                dataType: "json",
                success: function (result) {
                    var dataInfo = result.extend.data.records;
                    isFind = dataObj.attr("isFind") || 'true';
                    if (isFind == 'true') {
                        if (dataInfo.length < pageSize) {
                            dataObj.attr("isFind", 'false')
                        }
                        $.each(dataInfo, function (index, data) {
                            if (data.luckNum) {
                                var luckNum = data.luckNum.split(",");
                                var new_li;
                                if (flag && index == 1) {
                                    new_li = li.clone();
                                } else {
                                    new_li = dataObj.find("ul").find("li:first-child").clone();
                                }
                                if (languageType == 'zh') {
                                    new_li.find(".luckTotalStr").html("开奖金额");
                                } else {
                                    new_li.find(".luckTotalStr").html("Winning amount");
                                }

                                new_li.find(".lotteryIssue").html("#" + data.issueNum);
                                new_li.attr("lotteryIssueId",data.id);
                                new_li.attr("luckNum",luckNum);
                                var ul_1 = new_li.find(".lottery_service_lottery_record_num");
                                ul_1.empty();
                                $.each(luckNum, function (index, data) {
                                    ul_1.append("<li class='announcedNo" + luckNum[index] + "_" + luckNum[index] + "'></li>");
                                });
                                new_li.find(".luckTotal").html(data.luckTotal);

                                new_li.find(".lotteryTime").html(data.startTime + " ~ " + data.endTime);
                                ul.append(new_li);
                            }
                        })
                        dataObj.attr("isRepetition",'true');
                        dataObj.attr("currentPage", parseInt(currentPage) + 1);
                        dataObj.attr("pageSize", pageSize);
                        if (dataInfo.length < pageSize) {
                            ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
                        }
                    }
                }
            })
        }

    }

    function getLotteryDetail(e){
        var li = $(e);
        var issue = li.find(".lotteryIssue").html().replace("#","");
        var issueId = li.attr("lotteryIssueId");
        var luckNum = li.attr("luckNum");
        var layer_open_lottery = $(".lottery_winning_record_head");
        layer_open_lottery.find(".issue").html(li.find(".lotteryIssue").html());
        layer_open_lottery.find(".luckNum").html(luckNum.replace(/,/g," "));
        layer_open_lottery.find(".time").html(li.find(".lotteryTime").html());
        findWinningRecord(true,'lottery_winning_record_ul',issueId);
    }

    function findWinningRecord(flag,classProperty,issue){
        var dataObj = $("."+classProperty);
        var currentPage = dataObj.attr("currentPage") || 1;
        var pageSize = dataObj.attr("pageSize") || 20;
        var isFind = dataObj.attr("isFind") || "true";
        var isRepetition = dataObj.attr("isRepetition") || "true";
        var ul = dataObj;
        var li = dataObj.find("li:first-child");
        var languageType = getLanguage();
        if(languageType != 'zh'){
            languageType = 'en';
        }
        if(flag){
            issue = issue;
            dataObj.attr("currentPage",'1');
            dataObj.attr("isFind","true");
            dataObj.attr("issus",issue);
            currentPage = 1;
            ul.html("");
        }else {
            issue = dataObj.attr("issus") || issue;
        }
        if(isRepetition == 'true'){
            dataObj.attr("isRepetition",'false');
            var index_record = layer.load(3,{shade: [0.8, '#393D49']});
            $.ajax({
                url:'${projectPath}/apiauthorization/lotteryB/authorization/v1/getLotteryBuy',
                type:'get',
                data:{"currentPage":currentPage,"pageSize":pageSize,"lotterybIssueId":issue,"type":2,"isLuck":1},
                dataType:"json",
                success:function (result) {
                    layer.close(index_record);
                    var dataInfo = result.extend.data;
                    isFind = dataObj.attr("isFind") || 'true';
                    if(isFind == 'true') {
                        if (dataInfo.length < pageSize) {
                            dataObj.attr("isFind", 'false')
                        }
                        $.each(dataInfo, function (index, data) {
                            var new_li;
                            if(flag && index == 0){
                                new_li = li.clone();
                            }else {
                                new_li = dataObj.find("li:first-child").clone();
                            }
                            new_li.find(".email").html(data.email);
                            new_li.find(".luckNum").html(data.luckTotal);
                            if(languageType == 'zh'){
                                new_li.find(".multiples").html(data.multipleNum + " Multiples");
                            }else {
                                new_li.find(".multiples").html(data.multipleNum + " 倍");
                            }
                            new_li.show();
                            ul.append(new_li);
                        })
                        dataObj.attr("isRepetition",'true');
                        dataObj.attr("currentPage",parseInt(currentPage) + 1);
                        dataObj.attr("pageSize",pageSize);
                        if (dataInfo.length < pageSize) {
                            if(flag && dataInfo.length == 0){
                                li.hide();
                                ul.append(li);

                            }
                            ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
                        }
                    }

                    if(flag){
                        open_lottery_issue_record();
                    }
                }
            })
        }
    }

    function open_lottery_issue_record(){
        var width = document.body.clientWidth;
        var area = ["30%","400px"];
        if(width < 991){
            width = document.body.clientWidth;
            area = ["95%","400px"]
        }
        layer.open({
            type: 1,
            title: false,
            closeBtn: 0,
            shadeClose: true,
            scrollbar:false,
            skin: 'issue-record-class',
            area:  area,
            content: $(".lottery_winning_record").html()
        });

        $(".issue-record-class").find(".layer_open_lottery_issue").scroll(function(){
            var $this =$(this),
                viewH =$(this).height(),
                contentH =$(this).get(0).scrollHeight,
                scrollTop =$(this).scrollTop();
            if(scrollTop/(contentH -viewH) >= 0.95){
                findWinningRecord(false,'lottery_winning_record_ul');
            }
        });
    }

    function lotterybIssueRecode(){
        findLotteryIssue("the_lottery_record_id",true);
    }

    function lotterybBuyRecodeFind(dataClass,flag){
        var dataObj = $("."+dataClass);
        var lotterybInfoId = '${playTypeId!""}';
        var currentPage = dataObj.attr("currentPage") || 1;
        var pageSize = dataObj.attr("pageSize") || 20;
        var isFind = dataObj.attr("isFind") || "true";
        var isRepetition = dataObj.attr("isRepetition") || "true";
        var ul = dataObj.find("ul:first");
        var li = ul.find("li:first-child");
        var serviceItem = $(".service_item_content_type_value");
        var languageType = getLanguage();
        if(languageType != 'zh'){
            languageType = 'en';
        }
        if(flag){
            currentPage = dataObj.attr("currentPage",1);
            pageSize = dataObj.attr("pageSize",20);
            currentPage = 1;
            pageSize = 20;
            ul.html("");
        }
        if(isRepetition == 'true'){
            dataObj.attr("isRepetition",'false');
            $.ajax({
                url: '${projectPath}/api/lotteryB/v1/lotteryB/lotterybBuyRecodeFind',
                type: 'get',
                data: {"currentPage": currentPage, "pageSize": pageSize, "lotterybInfoId": lotterybInfoId},
                dataType: "json",
                success: function (result) {
                    var dataInfo = result.extend.data;
                    isFind = dataObj.attr("isFind") || 'true';
                    if (isFind == 'true') {
                        if (dataInfo.length < pageSize) {
                            dataObj.attr("isFind", 'false')
                        }
                        $.each(dataInfo, function (index, data) {
                            var new_li;
                            if (flag && index == 0) {
                                new_li = li.clone();
                            } else {
                                new_li = dataObj.find("ul").find("li:first-child").clone();
                            }
                            var typeValue = serviceItem.find("option[value=\""+data.type+"\"]").html();
                            if(languageType == 'zh'){
                                new_li.find(".type_name").html("["+typeValue+"]"+data.zhTitle);
                            }else {
                                new_li.find(".type_name").html("["+typeValue+"]"+data.enTitle);
                            }
                            new_li.find(".input_money").val(data.total);
                            new_li.find(".compensate_value").html(new Decimal(data.total).mul(new Decimal(data.lines)).toNumber());
                            new_li.show();
                            ul.append(new_li);
                        })
                        dataObj.attr("isRepetition",'true');
                        dataObj.attr("currentPage", parseInt(currentPage) + 1);
                        dataObj.attr("pageSize", pageSize);
                        if (dataInfo.length < pageSize) {
                            ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
                        }
                    }
                }
            })
        }

    }

</script>
<body class="body_top" data-spy="scroll" data-target=".services_item_inner">
<div class="super_container">

    <!-- commonality head -->
    <%
    include("../common/top.html"){}
    %>
    <div class="home">
        <div class="home_title">
            <div class="next_section_scroll">
                <div class="next_section nav_links" data-scroll-to=".service_boxes">
                    <i class="fas fa-chevron-down trans_200"></i>
                    <i class="fas fa-chevron-down trans_200"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- play list -->

    <div class="services">

        <div class="portfolio_categories button-group filters-button-group">
            <ul>
                <li class="portfolio_category lotteryPlay_li" data-filter=".lotteryPlay" data-localize="base.lotteryPlay">Lottery Play</li>
                <li class="portfolio_category" data-filter=".rules" data-localize="base.rules">Rules</li>
                <li class="portfolio_category" onclick="lotterybIssueRecode()" data-filter=".drawArchive" data-localize="base.drawArchive">Draw Archive</li>
            </ul>
        </div>

        <div class="product-grid">
            <!-- play -->
            <div class="lottery_item lotteryPlay ">

                <div class="service_item_content">
                    <div class="service_item_title service_item_title_name">
                        <div class="lottery_service_title"> <span class="lottery_title"></span></div>
                    </div>
                    <div class="service_item_title service_item_title_left">
                        <div class="lottery_service_title"> <span class="now_number_of_periods">0000000000000</span></div>
                        <div class="lottery_service_time">
                            <span class="timeIssueView">
                               <em class="em_time time_hour">00:00:00</em>
                            </span>
                        </div>
                    </div>

                    <div class="service_item_title service_item_title_right">
                        <div class="lottery_service_title"><span class="last_number_of_periods">0000000000000</span></div>
                        <div>
                            <ul class="lottery_service_lottery_animation" style="display: none">
                                <li><img src="../images/lotteryb/open_num.gif"></li>
                                <li><img src="../images/lotteryb/open_num.gif"></li>
                                <li><img src="../images/lotteryb/open_num.gif"></li>
                            </ul>
                            <ul class="lottery_service_lottery_num">
                                <li class="announcedNo1"></li>
                                <li class="announcedNo1"></li>
                                <li class="announcedNo1"></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="service_item_content_type">
                    <div class="service_item_content_type_subblock">
                        <select onchange="select_type(this)" class="service_item_content_type_value">
                            <option value="1"  class="sum_value" data-localize="base.sumValue"></option>
                            <option value="2"  class="three_same_number_through_selection" data-localize="base.threeSameNumberThroughSelection"></option>
                            <option value="3"  class="three_with_a_single" data-localize="base.threeWithASingle"></option>
                            <option value="4"  class="three_different_no." data-localize="base.threeDifferentNo"></option>
                            <option value="5"  class="three_companies_through_selection" data-localize="base.threeCompaniesThroughSelection"></option>
                            <option value="6"  class="two_identical_check" data-localize="base.twoIdenticalCheck"></option>
                            <option value="7"  class="two_on_the_same_sign" data-localize="base.twoOnTheSameSign"></option>
                            <option value="8"  class="the_two_different" data-localize="base.theTwoDifferent"></option>
                        </select>
                        <!--<div class="service_item_content_type_value"><span class="sum_value" data-localize="base.sumValue">Sum value</span></div>
                        <div class="service_item_content_type_value"><span class="three_same_number_through_selection" data-localize="base.threeSameNumberThroughSelection">Three same number through selection</span></div>
                        <div class="service_item_content_type_value"><span class="three_with_a_single" data-localize="base.threeWithASingle">Three with a single</span></div>
                        <div class="service_item_content_type_value"><span class="three_different_no." data-localize="base.threeDifferentNo.">Three different no.</span></div>
                        <div class="service_item_content_type_value"><span class="three_companies_through_selection" data-localize="base.threeCompaniesThroughSelection">Three companies through selection</span></div>
                        <div class="service_item_content_type_value"><span class="two_identical_check" data-localize="base.twoIdenticalCheck">Two identical check</span></div>
                        <div class="service_item_content_type_value"><span class="two_on_the_same_sign" data-localize="base.twoOnTheSameSign">Two on the same sign</span></div>
                        <div class="service_item_content_type_value"><span class="the_two_different" data-localize="base.theTwoDifferent">The two different</span></div>-->
                    </div>
                    <div class="service_item_content_type_value_text">
                        <p type="1" class="service_item_content_type_value_text_p sum_value_text" data-localize="base.sumValueText"></p>
                        <p type="2" style="display: none" class="service_item_content_type_value_text_p three_same_number_through_selection_text" data-localize="base.threeSameNumberThroughSelectionText"></p>
                        <p type="3" style="display: none" class="service_item_content_type_value_text_p three_with_a_single_text" data-localize="base.threeWithASingleText"></p>
                        <p type="4" style="display: none" class="service_item_content_type_value_text_p three_different_no_text" data-localize="base.threeDifferentNoText"></p>
                        <p type="5" style="display: none" class="service_item_content_type_value_text_p three_companies_through_selection_text" data-localize="base.threeCompaniesThroughSelectionText"></p>
                        <p type="6" style="display: none" class="service_item_content_type_value_text_p two_identical_check_text" data-localize="base.twoIdenticalCheckText"></p>
                        <p type="7" style="display: none" class="service_item_content_type_value_text_p two_on_the_same_sign_text" data-localize="base.twoOnTheSameSignText"></p>
                        <p type="8" style="display: none" class="service_item_content_type_value_text_p the_two_different_text" data-localize="base.theTwoDifferentText"></p>
                    </div>
                </div>
                <div class="service_item_content_body">
                    <div class="service_item_content_subblock">

                    </div>
                    <div class="service_item_content_subbutton">
                        <div class="model_purchase_button model_purchase_button_1">
                            <div class="button_purchase button_width_all" disabled="disabled" id="subbutton_confirm"><span data-localize="base.select">confirm</span></div>
                        </div>
                    </div>
                </div>
                <div class="service_item_content_buyList">
                    <ul class="service_item_content_buyList_ul ">
                        <li class="service_item_content_buyList_ul_li" type="-1" style="display: none">
                            <div class="li_item type_name">[sum value]</div>
                            <div class="li_item type_other">
                                <div class="li_item_block type_num"><span data-localize="base.number">[Number]</span> <span class="num_value">1</span> </div>
                                <div class="li_item_block type_money"><span data-localize="base.buy">[Buy]</span><input class="input_money" onchange="calculateMoney(this)" type="number" value="0"></div>
                                <div class="li_item_block type_compensate"><span data-localize="base.compensate">[Compensate]</span><span class="color_red compensate_value"> 0 </span></div>
                                <div class="li_item_block type_btn"><a class="a_delete" onclick="a_delete(this)" data-localize="base.delete">Delete</a></div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="service_item_content_btn">
                    <div class="service_item_content_btn_all_data">
                        <p> <span class="span_right" data-localize="base.number"></span> <span class="number span_right color_red">0</span>
                            <span class="span_right" data-localize="base.allMoney"></span><span class="all_total color_red">0.0</span></p>
                    </div>
                    <div class="model_purchase_button model_purchase_button_1">
                        <div class="button_purchase button_width_all" disabled="disabled" id="button_purchase"><span data-localize="base.confirm">confirm</span></div>
                    </div>
                </div>
                <div class="service_item_content_recode_list">
                    <ul class="service_item_content_recode_ul ">
                        <li class="service_item_content_recode_ul_li" style="display: none">
                            <div class="li_item type_name">[sum value]</div>
                            <div class="li_item type_other">
                                <div class="li_item_block type_num"><span data-localize="base.number">[Number]</span> <span class="num_value">1</span> </div>
                                <div class="li_item_block type_money"><span data-localize="base.buy">[Buy]</span><input class="input_money" readonly="readonly" onchange="calculateMoney(this)" type="number" value="0"></div>
                                <div class="li_item_block type_compensate"><span data-localize="base.compensate">[Compensate]</span><span class="color_red compensate_value"> 0 </span></div>
                            </div>
                        </li>
                    </ul>
                </div>
                <input id="availableBalance" type="hidden">
            </div>
            <!-- rule -->
            <div class="lottery_item rules" >
                <div class="service_item_content">
                    <div class="service_item_title_rule">
                        <h2 data-localize="base.rules">Rules</h2>
                    </div>
                </div>
                <div id="rules_content">

                </div>
            </div>
            <!-- Lottery record -->
            <div class="lottery_item drawArchive" >
                <div id="the_lottery_record_id" class="service_item_content">
                    <div class="service_item_title_draw">
                        <h2 data-localize="base.drawArchive">Draw archive</h2>
                    </div>
                    <ul class="ul_draw_archive services_item_inner-1" id="lottery_record">
                        <li class="lotteryRecord" onclick="getLotteryDetail(this)">
                            <div class="lotteryIssue">#0</div>
                            <div>
                                <div class="model_purchase_record">
                                    <div class="lottery_play_div_recode lottery_play_div_recode_1">
                                        <ul class="lottery_service_lottery_record_num">
                                            <li class="announcedNo1_1"></li>
                                            <li class="announcedNo1_1"></li>
                                            <li class="announcedNo1_1"></li>
                                        </ul>
                                    </div>
                                    <div class="lottery_play_div_recode lottery_play_div_recode_2">
                                        <span class="span_element_1 luckTotalStr"></span>
                                    </div>
                                    <div class="lottery_play_div_recode lottery_play_div_recode_3">
                                        <span class="span_element_1 luckTotal">0</span>
                                    </div>
                                    <div class="lottery_play_div_recode lottery_play_div_recode_4">
                                        <span class="span_element_1 lotteryTime">00-00-00 00:00:00 ~ 00-00-00 00:00:00</span>
                                    </div>
                                </div>
                            </div>
                            <hr>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="lottery_winning_record" style="display: none;">
        <div class="layer_open_lottery_issue services_item_inner-1">
            <div class="lottery_winning_record_head">
                <p class="p_content_center p_content_center_issue">
                    <span class="issue p_content_center_left">#5</span>
                </p>
                <p class="p_content_center">
                    <span class="p_content_center_right" data-localize="base.drawArchive"></span>
                </p>
                <p class="p_content_center luckNum"> 1 2 3</p>
                <p class="p_content_center time">00-00-00 00:00:00 ~ 00-00-00 00:00:00</p>
            </div>
            <hr>
            <ul class="lottery_winning_record_ul">
                <li>
                    <!--<p><span class="memberName">on</span> </p>-->
                    <p><span class="email">on@xx.xx</span></p>
                    <P><span class="luckNum span_right"> 0</span> <span class="multiples"> 0 Multiples </span> </P>
                    <hr>
                </li>
            </ul>
        </div>
    </div>
    <!-- commonality fotter -->
    <!--<%
    include("../common/bottom.html"){}
    %>-->
    <div class="layer_open_to_receive" style="display: none">
        <div class="to_receive_head">
            <p class="lotterybName"></p>
            <p class="lotterybIssue"></p>
            <input class="lotterybInfoId" lotterybinfoid='${playTypeId!""}' type="hidden">
            <hr>
        </div>
        <div class="to_receive_content">
            <ul class="receive_content_list services_item_inner-1">

            </ul>
        </div>
        <div class="layer_allTotal">
            <p><span class="span_right" data-localize="base.allMoney">All money</span><span class="span_right total"></span></p>
        </div>
        <div class="model_purchase_button">
            <div class="button_purchase confirm" onclick="paymentCodeConfirm()"><span data-localize="base.confirm">confirm</span></div>
        </div>
    </div>

</div>
</body>
</html>