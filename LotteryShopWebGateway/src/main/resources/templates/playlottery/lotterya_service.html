<!DOCTYPE html>
<html lang="en">
<head>
	<!-- commonality  meta and title -->
	<%
	include("../common/common.meta.html"){}
	%>
	<!-- commonality style -->
	<%
	include("../common/common.css.html"){}
	%>
	<link rel="stylesheet" type="text/css" href="../styles/portfolio_styles1.css">
	<link rel="stylesheet" type="text/css" href="../styles/portfolio_responsive1.css">
	<link rel="stylesheet" type="text/css" href="../styles/main_styles1.css">
	<link rel="stylesheet" type="text/css" href="../styles/responsive1.css">
	<link rel="stylesheet" type="text/css" href="../styles/lottery_service.css">
</head>
<!-- commonality js -->
<%
include("../common/common.js.html"){}
%>
<script src="../js/portfolio_custom.js"></script>
<script>
	var lay_play_code;
	var loginUser = '${loginUser!}';
	$(function(){
		//back html
		$(".back").click(function(){
			//history.back();
			window.location.href ="/web/authIndex";
		});
		var li = $(".lotteryPlay_li");
		li.click();
		$(".ul_draw_archive").scroll(function(){
			var $this =$(this),
					viewH =$(this).height(),
					contentH =$(this).get(0).scrollHeight,
					scrollTop =$(this).scrollTop();
			if(scrollTop/(contentH -viewH) >= 0.95){
				findLotteryIssue("the_lottery_record_id",false);
			}
		});




		$(".ul_self_record").scroll(function(){
			var viewH = $(this).height();
			var contentH = $(this).get(0).scrollHeight;
			var scrollTop =$(this).scrollTop();
			if(scrollTop/(contentH-viewH) >= 0.95){
				var lotteryIssueNum = $(".number_of_periods").attr("issueNumId");
				findLotteryRecord(1,"0,1,2","lottery_self_record",true,lotteryIssueNum);
			}
		});


		$(".lottery_play_div_element").click(function(){
			var div_up = $(this).parent();
			var dataNumber = div_up.attr("data-number");
			div_up.find(".lottery_play_div_element").removeClass("lottery_play_div_element_select"+"_"+(parseInt(dataNumber) - 1));
			$(this).addClass("lottery_play_div_element_select"+"_"+(parseInt(dataNumber) - 1));
            var lottery_play = $(".lottery_play_"+dataNumber);
            var lottery_play_parent = lottery_play.parent();
            lottery_play_parent.html("<div class='lottery_play_"+dataNumber+" span_element_num_"+($(this).find(".span_element ").attr("data_html"))+"' dataValue='"+$(this).find(".span_element ").attr("data_html")+"'></div>");
			//$(".lottery_play_"+dataNumber).html($(this).find("span").html());
		});
		$("#fast_select_random").click(function(){
			var number_1 = Math.floor(Math.random()*10);
			var number_2 = Math.floor(Math.random()*10);
			var number_3 = Math.floor(Math.random()*10);
			$(".lottery_play_div_element_0").find("div[data_html="+number_1+"]").click();
			$(".lottery_play_div_element_1").find("div[data_html="+number_2+"]").click();
			$(".lottery_play_div_element_2").find("div[data_html="+number_3+"]").click();
			calculateCost();
		});

		$("#button_purchase").click(function(){
			var availableBalance = $(".money_self").html() || 0;
			var incurExpense = $(".money_expenditure").attr("dataValue") || 0;
			if(!loginUser){
				layer.msg("please log in !");
				window.location.href = "/web/authLogin?rdirectUrl=/web/authLotteryServices?playType=1";
			} else if(parseFloat(availableBalance) < parseFloat(incurExpense)){
				layui_open("Account balance is insufficient, please recharge first !");
			} else {
				var number_1 = $(".lottery_play_1").attr("dataValue") || 0;
				var number_2 = $(".lottery_play_2").attr("dataValue") || 0;
				var number_3 = $(".lottery_play_3").attr("dataValue") || 0;
				var multiple = $(".input_number").val() || 0;
				lay_play_code = layer.open({
					type: 1,
					title:"Payment code",
					anim: 2,
					shadeClose: true,
					data:{"number_1":number_1,"number_2":number_2,"number_3":number_3,"multiple":multiple},
					content: $("#playPassword").html()
				});
			}
		});
		//init
		findRule();
		getLotteryConfig();
		findLotteryIssue("the_lottery_record_id",true);
		var languageType = getLanguage();
		if(languageType != 'zh'){
			languageType = 'en';
		}
		if(loginUser){
			findLotteryAIssueReceiveStatistics(languageType);
		}

	})

	function paymentCodeConfirm(){
        var number_1 = $(".lottery_play_1").attr("dataValue") || 0;
        var number_2 = $(".lottery_play_2").attr("dataValue") || 0;
        var number_3 = $(".lottery_play_3").attr("dataValue") || 0;
		var payPasswod = "";
		$(".paymentCode").each(function(index,data){
			var paymentCode_1 = $(data).val() || "";
			if(paymentCode_1){
				payPasswod = paymentCode_1;
			}
		});
		if(payPasswod == null || payPasswod == ''){
			layui_open("Please enter your password !");
			return;
		}
		var luckNum = number_1 +　number_2 + number_3;
		var multipleNumber = $(".input_number").val() || "";
		var index = layer.load(1);
		$.ajax({
			url:'${projectPath}/api/lotteryA/v1/lotteryA/ethBuyLottery',
			type:'get',
			data:{"payPasswod":payPasswod,"luckNum":luckNum,"multipleNumber":multipleNumber},
			dataType:"json",
			success:function (result) {
				layer.close(index);
				if(result.code == 200){
					layer.close(lay_play_code);
					layer.msg(result.msg,{time: 2000},function () {
						parent.layer.close(index);
                        //findLotteryRecord(1,"0,1,2","lottery_self_record",true,lotteryIssueNum);
						location.reload();
					});

				}else {
					layui_open(result.msg);
				}
			}
		})

	}
	function calculateCost(){
		var gas = $(".money_expenditure").attr("gas") || 0;
		var multiple = $(".input_number").val() || 0;
		var price = $(".money_haploid").attr("price") || 0;
		var doubledMoney = $(".money_haploid").attr("doubledMoney") || 0;
		var total = parseFloat(multiple) * parseFloat(price) + parseFloat(gas);
		var tatalStr = price + "*" + multiple +  "+Gas(Max≈0.0946)=" +　parseFloat(total.toFixed(6));
		$(".money_expenditure").html(tatalStr);
		$(".money_bounty").html(multiple * doubledMoney);
		$(".money_expenditure").attr("dataValue",total);
	}

	function getLotteryConfig(){
		$.ajax({
			url:'${projectPath}/apiauthorization/lotteryA/authorization/v1/getLotteryInfo',
			type:'get',
			dataType:"json",
			success:function (result) {
				var language = getLanguage();
				if(result.code){
					var info = result.extend.data;
					if(language == 'en'){
						$(".lottery_title").html(info.entitle);
						$(".img_random_title").attr("title","random");
					}
					if(language == 'zh'){
						$(".lottery_title").html(info.zhtitle);
						$(".img_random_title").attr("title","隨機");
					}
					$(".number_of_periods").html(info.issueNum)
					$(".number_of_periods").attr("issueNumId",info.issueNumId);
					$(".money_haploid").html(parseFloat(info.total));
					$(".money_haploid").attr("price",parseFloat(info.price));
					$(".money_haploid").attr("doubledMoney",info.total);
					$(".money_bounty").html(info.total);
					$(".number_of_periods").html(info.issueNum);
					$(".lottery_service_time").attr("endTime",info.endTime);
					$(".lottery_service_time").attr("startTime",info.startTime);
					$(".lottery_service_time").attr("presentTime",info.presentTime);
					countDown();
					getGas(parseFloat(info.price));
                    findLotteryRecord(1,"0,1,2","lottery_self_record",false,info.issueNumId);
				}
			}
		})
		if(loginUser){
			findEthWallet();
		}
	}

	function findEthWallet(){
		$.ajax({
			url:'${projectPath}/api/base/v1/ethWallet/findEthWallet',
			type:'get',
			dataType:"json",
			success:function (result) {
				var info = result.extend.data;
				$(".money_self").html(info.balance);
			}
		})
	}

	function getGas(price){
		$.ajax({
			url:'${projectPath}/apiauthorization/base/authorization/v1/baseInfo/findPlayConfig',
			type:'get',
			dataType:"json",
			success:function (result) {
				var gas = result.gas;
				$(".money_expenditure").attr("gas",gas)
				var total = parseFloat(gas) + parseFloat(price);
				total = parseFloat(total.toFixed(6));
				$(".money_expenditure").html( price+ " * 1 + Gas(Max≈"+gas+") = " + total);
			}
		})
	}

	function countDown(){
		var today=new Date(),h=today.getHours(),m=today.getMinutes(),s=today.getSeconds();
		//var today=new Date($(".lottery_service_time").attr("presentTime")),h=today.getHours(),m=today.getMinutes(),s=today.getSeconds();
		var startTime = new Date($(".lottery_service_time").attr("startTime"));
		var stopTime=new Date($(".lottery_service_time").attr("endTime"));
		if((today.getTime() - startTime.getTime()) > 0 && stopTime.getTime() - today.getTime() > 0){//start period
			$(".timeIssueGiveOut").hide();
			$(".timeIssueDraw").hide();
			$(".timeIssueView").show();
			var stopH=stopTime.getHours(),stopM=stopTime.getMinutes(),stopS=stopTime.getSeconds();
			var shenyu=stopTime.getTime()-today.getTime(),
					shengyuD=parseInt(shenyu/(60*60*24*1000)),
					D=parseInt(shenyu)-parseInt(shengyuD*60*60*24*1000),
					shengyuH=parseInt(D/(60*60*1000)),
					H=D-shengyuH*60*60*1000,
					shengyuM=parseInt(H/(60*1000)),
					M=H-shengyuM*60*1000;
			var shengyus = parseInt((shenyu-shengyuD*60*60*24*1000-shengyuH*60*60*1000-shengyuM*60*1000)/1000)
			$(".time_hour").html(shengyuH);
			$(".time_minute").html(shengyuM);
			$(".time_second").html(shengyus);
		}
		if(today.getTime() - startTime.getTime() < 0){
			$(".timeIssueView").hide();
			$(".timeIssueDraw").hide();
			$(".timeIssueGiveOut").show();
			$("#button_purchase").addClass("button_purchase_forbid")
		}
		if(today.getTime() - stopTime.getTime() > 0 ){
			$(".timeIssueView").hide();
			$(".timeIssueGiveOut").hide();
			$(".timeIssueDraw").show();
			$("#button_purchase").addClass("button_purchase_forbid")
		}
		setTimeout(countDown,500);
	}
	function numner_add_or_aubtract(number){
		var old_number = $(".input_number").val() || '1';
		old_number = old_number.replace(/[^0-9]/ig,"");
		var new_number = parseInt(old_number);
		if(new_number <= 1 && (number == -1 || number == 0)){
			new_number = 1;
		}else {
			new_number = new_number + number;
		}
		if(new_number > 100){
			new_number = 100;
		}
		$(".input_number").val(new_number);
		calculateCost();
	}
	function findRule(){
		var playType = '${playType}' || "";
		var languageType = getLanguage();
		if(languageType != 'zh'){
			languageType = 'en';
		}
		$.ajax({
			url:'${projectPath}/apiauthorization/base/authorization/v1/baseInfo/findPlayTypeRule',
			type:'get',
			data:{"playType":playType,"languageType":languageType},
			dataType:"json",
			success:function (result) {
				$.each(result,function(index,data){
					$("#rules_content").html(data.content);
				})
			}
		})
	}
	function findLotteryRecord(isOneself,mTransferStatus,dataId,flag,lotteryaIssueId){
		var dataObj = $("#"+dataId);
		var currentPage = dataObj.attr("currentPage") || 1;
		var pageSize = dataObj.attr("pageSize") || 20;
		var isFind = dataObj.attr("isFind") || 'true';
        var languageType = getLanguage();
        if(languageType != 'zh'){
            languageType = 'en';
        }
		var ul = dataObj.find("ul");
		var li = ul.find("li:first-child");
		if(flag){
			ul.html("");
			ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
			return ;
		}
		if(isFind == 'true'){
			$.ajax({
				url:'${projectPath}/api/lotteryA/v1/lotteryA/getLotteryBuy',
				type:'get',
				data:{"currentPage":currentPage,"pageSize":pageSize,"mTransferStatus":mTransferStatus,"lotteryaIssueId":lotteryaIssueId},
				//data:{"currentPage":currentPage,"pageSize":pageSize,"mTransferStatus":mTransferStatus,"lotteryaIssueId":lotteryaIssueId,"isOneself":1},
				dataType:"json",
				success:function (result) {
					var data = result.extend.data;
					var doubledMoney = $(".money_haploid").attr("doubledMoney");
					var flag_1 = false;
					if(data.records.length < 1){
						dataObj.attr("isFind",'false');
						flag_1 = true;
					}else {
						$.each(data.records, function (index, dataInfo) {
							var luckNum = dataInfo.luckNum.split("");
                            var new_li;
                            if(flag && index == 0){
                                new_li = li.clone();
                            }else {
                                new_li = dataObj.find("ul").find("li:first-child").clone();
                            }
                            if(languageType = 'zh'){
                                if(dataInfo.transferStatus == '0'){
                                    new_li.find(".status_dispose").html("处理中");
                                }
                                if(dataInfo.transferStatus == '1'){
                                    new_li.find(".status_dispose").html("成功");
                                }
                                if(dataInfo.transferStatus == '2'){
                                    new_li.find(".status_dispose").html("失败");
                                }
                            }else {
                                if(dataInfo.transferStatus == '0'){
                                    new_li.find(".status_dispose").html("dispose");
                                }
                                if(dataInfo.transferStatus == '1'){
                                    new_li.find(".status_dispose").html("success");
                                }
                                if(dataInfo.transferStatus == '2'){
                                    new_li.find(".status_dispose").html("fail");
                                }
                            }

                            new_li.find(".luckNum_1").addClass("span_element_num_"+luckNum[0]);
                            new_li.find(".luckNum_2").addClass("span_element_num_"+luckNum[1]);
                            new_li.find(".luckNum_3").addClass("span_element_num_"+luckNum[2]);
                            new_li.find(".multiple").html(dataInfo.multipleNum);
                            new_li.find(".luckTotal").html((parseFloat(doubledMoney) * parseFloat(dataInfo.multipleNum)) + "ETH");
                            new_li.find(".createTime").html(dataInfo.createTime);
                            new_li.show();
                            ul.append(new_li);
						})
					}
                    if (data.length < pageSize) {
                        ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
                    }
				}
			})

		}
		dataObj.attr("currentPage",parseInt(currentPage) + 1);
		dataObj.attr("pageSize",pageSize);
	}
	function findLotteryIssue(dataId,flag){
		var dataObj = $("#"+dataId);
		var currentPage = dataObj.attr("currentPage") || 1;
		var pageSize = dataObj.attr("pageSize") || 20;
		var isFind = dataObj.attr("isFind") || "true";
		var isRepetition = dataObj.attr("isRepetition") || "true";
		var ul = dataObj.find("ul");
		var li = dataObj.find("ul").find("li:first-child");
		var languageType = getLanguage();
		if(languageType != 'zh'){
			languageType = 'en';
		}
		if(flag){
			ul.html("");
		}
		if(isRepetition == 'true'){
			dataObj.attr("isRepetition",'false');
			$.ajax({
				url:'${projectPath}/apiauthorization/lotteryA/authorization/v1/getLotteryIssue',
				type:'get',
				data:{"currentPage":currentPage,"pageSize":pageSize},
				dataType:"json",
				success:function (result) {
					var dataInfo = result.extend.data.records;
					isFind = dataObj.attr("isFind") || 'true';
					if(isFind == 'true') {
						if (dataInfo.length < pageSize) {
							dataObj.attr("isFind", 'false')
						}
						$.each(dataInfo, function (index, data) {
							if(data.luckNum){
								var luckNum = data.luckNum.split("");
								var new_li;
								if(flag && index == 0){
									new_li = li.clone();
								}else {
									new_li = dataObj.find("ul").find("li:first-child").clone();
								}
								if(languageType == 'zh'){
									new_li.find(".luckNumStr").html("幸运号");
									new_li.find(".luckTotalStr").html("开奖金额");

								}else {
									new_li.find(".luckNumStr").html("Luck number");
									new_li.find(".luckTotalStr").html("Winning amount");
								}
								new_li.find(".lotteryIssue").html("#"+data.issueNum);
								new_li.find(".luckNum_1").addClass("span_element_num_"+luckNum[0]);
								new_li.find(".luckNum_2").addClass("span_element_num_"+luckNum[1]);
								new_li.find(".luckNum_3").addClass("span_element_num_"+luckNum[2]);
								new_li.find(".luckTotal").html(data.luckTotal+"ETH");
								new_li.find(".lotteryTime").html(data.startTime + " ~ " + data.endTime);
								new_li.show();
								ul.append(new_li);
							}
						})
						if (dataInfo.length < pageSize) {
							ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
						}
						dataObj.attr("isRepetition",'true');
						dataObj.attr("currentPage",parseInt(currentPage) + 1);
						dataObj.attr("pageSize",pageSize);
					}
				}
			})
		}

	}
	function getLotteryDetail(e){
		var li = $(e);
		var issue = li.find(".lotteryIssue").html().replace("#","");
		var layer_open_lottery = $(".lottery_winning_record_head");
		layer_open_lottery.find(".issue").html(li.find(".lotteryIssue").html());
		layer_open_lottery.find(".luckNum").html(li.find(".luckNum_1").html()+ " " + li.find(".luckNum_2").html() + " " + li.find(".luckNum_3").html());
		layer_open_lottery.find(".time").html(li.find(".lotteryTime").html());
		findWinningRecord(true,'lottery_winning_record_ul',issue);
	}
	function findWinningRecord(flag,classProperty,issue){
		var dataObj = $("."+classProperty);
		var currentPage = dataObj.attr("currentPage") || 1;
		var pageSize = dataObj.attr("pageSize") || 20;
		var isFind = dataObj.attr("isFind") || "true";
		var isRepetition = dataObj.attr("isRepetition") || "true";
		var ul = dataObj;
		var li = dataObj.find("li:first-child");
		var languageType = getLanguage();
		if(languageType != 'zh'){
			languageType = 'en';
		}
		if(flag){
			issue = issue;
			dataObj.attr("currentPage",'1');
			dataObj.attr("isFind","true");
			dataObj.attr("issus",issue);
			currentPage = 1;
			ul.html("");
		}else {
			issue = dataObj.attr("issus") || issue;
		}
		if(isRepetition == 'true'){
			dataObj.attr("isRepetition",'false');
			var index_record = layer.load(3,{shade: [0.8, '#393D49']});
			$.ajax({
				url:'${projectPath}/apiauthorization/lotteryA/authorization/v1/getLotteryBuy',
				type:'get',
				data:{"currentPage":currentPage,"pageSize":pageSize,"lotteryaIssueId":issue,"type":2,"isLuck":1},
				dataType:"json",
				success:function (result) {
					layer.close(index_record);
					var dataInfo = result.extend.data;
					isFind = dataObj.attr("isFind") || 'true';
					if(isFind == 'true') {
						if (dataInfo.length < pageSize) {
							dataObj.attr("isFind", 'false')
						}
						$.each(dataInfo, function (index, data) {
							var new_li;
							if(flag && index == 0){
								new_li = li.clone();
							}else {
								new_li = dataObj.find("li:first-child").clone();
							}
							/*new_li.find(".memberName").html(data.memberName);*/
							new_li.find(".email").html(data.email);
							new_li.find(".luckNum").html(data.luckTotal + " ETH");
							if(languageType == 'zh'){
								new_li.find(".multiples").html(data.multipleNum + " Multiples");
							}else {
								new_li.find(".multiples").html(data.multipleNum + " 倍");
							}


							new_li.show();
							ul.append(new_li);
						})
						dataObj.attr("isRepetition",'true');
						dataObj.attr("currentPage",parseInt(currentPage) + 1);
						dataObj.attr("pageSize",pageSize);
						if (dataInfo.length < pageSize) {
							if(flag && dataInfo.length == 0){
								li.hide();
								ul.append(li);

							}
							ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
						}
					}
					if(flag){
						open_lottery_issue_record();
					}
				}
			})
		}

	}
	function open_lottery_issue_record(){
		var width = document.body.clientWidth;
		var area = ["30%","400px"];
		if(width < 991){
			width = document.body.clientWidth;
			area = ["95%","400px"]
		}
		layer.open({
			type: 1,
			title: false,
			closeBtn: 0,
			shadeClose: true,
			scrollbar:false,
			skin: 'issue-record-class',
			area:  area,
			content: $(".lottery_winning_record").html()
		});

		$(".issue-record-class").find(".layer_open_lottery_issue").scroll(function(){
			var $this =$(this),
					viewH =$(this).height(),
					contentH =$(this).get(0).scrollHeight,
					scrollTop =$(this).scrollTop();
			if(scrollTop/(contentH -viewH) >= 0.95){
				findWinningRecord(false,'lottery_winning_record_ul');
			}
		});
	}
	function openToReceive(){
		var width = document.body.clientWidth;
		var area = ["30%","400px"];
		if(width < 991){
			width = document.body.clientWidth;
			area = ["95%","400px"]
		}
		layer.open({
			type: 1,
			title: false,
			shadeClose: true,
			scrollbar:false,
			area:area,
			skin: 'layer_receive_list',
			content: $(".layer_open_to_receive").html()
		});
		//.layer_receive_list
		findLotteryAIssueReceive(true);
		$(".layer_receive_list").find(".receive_content_list").scroll(function(){
			var $this =$(this),
					viewH =$(this).height(),
					contentH =$(this).get(0).scrollHeight,
					scrollTop =$(this).scrollTop();
			if(scrollTop/(contentH -viewH) >= 0.95){
				findLotteryAIssueReceive(false);
			}
		});
	}
	function findLotteryAIssueReceive(flag){
		var dataObj = $(".layer_receive_list");
		var currentPage = dataObj.attr("currentPage") || 1;
		var pageSize = dataObj.attr("pageSize") || 5;
		var isFind = dataObj.attr("isFind") || "true";
		var isRepetition = dataObj.attr("isRepetition") || "true";
		var ul = dataObj.find("ul");
		var li = ul.find("li:first-child");
		var languageType = getLanguage();
		if(languageType != 'zh'){
			languageType = 'en';
		}
		if(flag){
			dataObj.attr("currentPage",'1');
			dataObj.attr("isFind","true");
			currentPage = 1;
			ul.html("");
		}
		if(isRepetition == 'true'){
			dataObj.attr("isRepetition",'false');
			$.ajax({
				url:'${projectPath}/api/lotteryA/v1/lotteryA/findLotteryAIssueReceive',
				type:'get',
				data:{"currentPage":currentPage,"pageSize":pageSize},
				dataType:"json",
				success:function (result) {
					var dataInfo = result.extend.data;
					isFind = dataObj.attr("isFind") || 'true';
					if(isFind == 'true') {
						if (dataInfo.length < pageSize) {
							dataObj.attr("isFind", 'false')
						}
						$.each(dataInfo, function (index, data) {
							var new_li;
							if(flag && index == 0){
								new_li = li.clone();
							}else {
								new_li = dataObj.find("li:first-child").clone();
							}
							new_li.find(".issue").html("#"+data.issueNum);
							new_li.find(".time").html(data.startTime + "~" + data.endTime);
							if(languageType == 'zh'){
								new_li.find(".explain_1").html("购买分红");
								new_li.find(".explain_2").html("中奖分红");
								if(data.status == '0'){
									new_li.find(".explain_3").html("待领取");
									$(".to_receive_content").find(".count_down").show();
								}
								if(data.status == '1'){
									new_li.find(".explain_3").html("已领取");
									$(".to_receive_content").find(".count_down").hide();
								}
								if(data.status == '2'){
									new_li.find(".explain_3").html("过期");
									$(".to_receive_content").find(".count_down").hide();
								}
							}else {
								new_li.find(".explain_1").html("Purchase of bonus");
								new_li.find(".explain_2").html("winning of bonus");
								if(data.status == '0'){
									new_li.find(".explain_3").html("待领取");
									$(".to_receive_content").find(".count_down").show();
								}
								if(data.status == '1'){
									new_li.find(".explain_3").html("already received");
									$(".to_receive_content").find(".count_down").hide();
								}
								if(data.status == '2'){
									new_li.find(".explain_3").html("past due");
									$(".to_receive_content").find(".count_down").hide();
								}
							}
							new_li.find(".total_1").val(data.gTotal);
							new_li.find(".total_2").val(data.zTotal);

							new_li.find(".count_down").html();

							ul.append(new_li);
						})
						dataObj.attr("isRepetition",'true');
						dataObj.attr("currentPage",parseInt(currentPage) + 1);
						dataObj.attr("pageSize",pageSize);
						if (dataInfo.length < pageSize) {
							ul.append("<li class='li_eth_come' style='text-align: center;' dataTag='noMore'>No More</li>")
						}
					}
				}
			})
		}
	}
	function findLotteryAIssueReceiveStatistics(languageType){
		$.ajax({
			url: '/api/lotteryA/v1/lotteryA/findLotteryAIssueReceiveStatistics',
			type: 'get',
			dataType: "json",
			success: function (result) {
				var data = result.extend.data;
				if(data){
					if(languageType == 'zh'){
						$(".div_to_receive").find("marquee").html("待领取 " +data.totalAll);
					}else{
						$(".div_to_receive").find("marquee").html("To receive "+data.totalAll);
					}
				}else{
					if(languageType == 'zh'){
						$(".div_to_receive").find("marquee").html("暂无领取");
					}else{
						$(".div_to_receive").find("marquee").html("No receive ");
					}
				}
			}
		})
	}
</script>
<body class="body_top" data-spy="scroll" data-target=".services_item_inner">

<div class="super_container">

	<!-- commonality head -->
	<%
	include("../common/top.html"){}
	%>
	<div class="home">
		<div class="home_title">
			<div class="next_section_scroll">
				<div class="next_section nav_links" data-scroll-to=".service_boxes">
					<i class="fas fa-chevron-down trans_200"></i>
					<i class="fas fa-chevron-down trans_200"></i>
				</div>
			</div>
		</div>
	</div>

	<!-- play list -->

	<div class="services">

		<div class="portfolio_categories button-group filters-button-group">
			<ul>
				<li class="portfolio_category lotteryPlay_li" data-filter=".lotteryPlay" data-localize="base.lotteryPlay">Lottery Play</li>
				<li class="portfolio_category" data-filter=".rules" data-localize="base.rules">Rules</li>
				<li class="portfolio_category" data-filter=".drawArchive" data-localize="base.drawArchive">Draw Archive</li>
			</ul>
		</div>

		<div class="product-grid">
			<!-- play -->
			<div class="lottery_item lotteryPlay ">
				<div class="service_item_content">
					<div class="service_item_title">
						<% if(loginUser != null && loginUser != ""){ %>
						<div class="lottery_service_to_receive">
							<div class="div_to_receive">
								<a onclick="openToReceive()" href="#"><marquee></marquee></a>
							</div>
						</div>
						<% } %>
						<div class="lottery_service_title"> <span class="lottery_title"></span> <span class="number_of_periods"></span></div>
						<div class="lottery_service_time">
							<div class="timeIssueDraw" data-localize="base.drawALottery" style="display: none"></div>
							<div class="timeIssueGiveOut" data-localize="base.giveOut" style="display: none"></div>
							<span class="timeIssueView" style="display: none">
                               <em class="em_time time_hour">00</em> :
                                <em  class="em_time time_minute">00</em> :
                                <em  class="em_time time_second">00</em>
                            </span>
						</div>

					</div>
					<div class="lottery_play_div">
						<div class="lottery_play_div_1" data-number="1">
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0 lottery_play_div_element_select_0">
								<!--<span class="span_element" data_html="0">0</span>-->
                                <div class="span_element span_element_num_0" data_html="0"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="1">1</span>-->
                                <div class="span_element span_element_num_1" data_html="1"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="2">2</span>-->
                                <div class="span_element span_element_num_2" data_html="2"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="3">3</span>-->
                                <div class="span_element span_element_num_3" data_html="3"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="4">4</span>-->
                                <div class="span_element span_element_num_4" data_html="4"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="5">5</span>-->
                                <div class="span_element span_element_num_5" data_html="5"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="6">6</span>-->
                                <div class="span_element span_element_num_6" data_html="6"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="7">7</span>-->
                                <div class="span_element span_element_num_7" data_html="7"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="8">8</span>-->
                                <div class="span_element span_element_num_8" data_html="8"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_0 lottery_play_div_element_border_0">
								<!--<span class="span_element" data_html="9">9</span>-->
                                <div class="span_element span_element_num_9" data_html="9"></div>
							</div>
						</div>
						<div class="lottery_play_div_1" data-number="2" >
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1 lottery_play_div_element_select_1">
								<!--<span class="span_element" data_html="0">0</span>-->
                                <div class="span_element span_element_num_0" data_html="0"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="1">1</span>-->
                                <div class="span_element span_element_num_1" data_html="1"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="2">2</span>-->
                                <div class="span_element span_element_num_2" data_html="2"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="3">3</span>-->
                                <div class="span_element span_element_num_3" data_html="3"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="4">4</span>-->
                                <div class="span_element span_element_num_4" data_html="5"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="5">5</span>-->
                                <div class="span_element span_element_num_5" data_html="5"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="6">6</span>-->
                                <div class="span_element span_element_num_6" data_html="6"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="7">7</span>-->
                                <div class="span_element span_element_num_7" data_html="7"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="8">8</span>-->
                                <div class="span_element span_element_num_8" data_html="8"></div>
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_1 lottery_play_div_element_border_1">
								<!--<span class="span_element" data_html="9">9</span>-->
                                <div class="span_element span_element_num_9" data_html="9"></div>
							</div>
						</div>
						<div class="lottery_play_div_1" data-number="3">
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2 lottery_play_div_element_select_2">
                                <div class="span_element span_element_num_0" data_html="0"></div>
                                <!--<span class="span_element span_element_num_0" data_html="0">0</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_1" data_html="1"></div>
								<!--<span class="span_element span_element_num_1" data_html="1">1</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_2" data_html="2"></div>
								<!--<span class="span_element span_element_num_2" data_html="2">2</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_3" data_html="3"></div>
								<!--<span class="span_element" data_html="3">3</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_4" data_html="4"></div>
								<!--<span class="span_element" data_html="4">4</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_5" data_html="5"></div>
								<!--<span class="span_element" data_html="5">5</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class=" span_element span_element_num_6" data_html="6"></div>
								<!--<span class="span_element" data_html="6">6</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_7" data_html="7"></div>
								<!--<span class="span_element" data_html="7">7</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_8" data_html="8"></div>
								<!--<span class="span_element" data_html="8">8</span>-->
							</div>
							<div class="lottery_play_div_element lottery_play_div_element_2 lottery_play_div_element_border_2">
                                <div class="span_element span_element_num_9" data_html="9"></div>
								<!--<span class="span_element" data_html="9">9</span>-->
							</div>
							<div class="magicStick" id="fast_select_random">
								<img class="img_random_title" title="random" src="../images/mfb.png" style="width: 25px;height: 25px;">
							</div>
						</div>

					</div>
					<div class="purchase">
						<div class="model_purchase">
							<div class="lottery_play_div_select lottery_play_div_select_left">
								<div class="lottery_play_div_element_3 lottery_play_div_element_border_0 ">
									<!--<span class="span_element lottery_play_1">0</span>-->
                                    <div class="lottery_play_1 span_element_num_0" dataValue="0"></div>
								</div>
								<div class="lottery_play_div_element_3 lottery_play_div_element_border_1">
									<!--<span class="span_element lottery_play_2 ">0</span>-->
                                    <div class="lottery_play_2 span_element_num_0" dataValue="0"></div>
								</div>
								<div class="lottery_play_div_element_3 lottery_play_div_element_border_2">
									<!--<span class="span_element lottery_play_3 ">0</span>-->
                                    <div class="lottery_play_3 span_element_num_0" dataValue="0"></div>
								</div>
							</div>
							<div class="lottery_play_div_select lottery_play_div_select_right">
								<!--<span class="font_color" data-localize="base.spendAFewBefore">You select the</span>-->
								<div class="multiple_input">
                                    <a onclick="numner_add_or_aubtract(-1)" class="a_button">-</a><input value="1" class="input_number" onchange="numner_add_or_aubtract(0)"><a onclick="numner_add_or_aubtract(1)"  class="a_button">+</a>
                                    <!--<span class="font_color" data-localize="base.spendAFewLater">Bet</span>-->
                                </div>
                            </div>
						</div>
						<div class="model_purchase_1">
							<div class="lottery_play_div_select lottery_play_div_select_left">
								<div class="model_money">
									<p class="money_portion"><span data-localize="base.haploid">Double bonus : </span><span class="money_haploid">0</span> ETH</p>
									<p class="money_portion"><span data-localize="base.usable">Available Funds : </span><span class="money_self">0</span> ETH</p>
									<p class="money_portion"><span data-localize="base.expenditure">Payment amount : </span><span class="money_expenditure">0 * 1 + Gas(Max≈0) = 0</span> ETH</p>
									<p class="money_portion bounty_title"><span data-localize="base.bounty">Amount of bonus : </span><span class="money_bounty">0</span> ETH</p>
								</div>
							</div>
                            <div class="lottery_play_div_select lottery_play_div_select_right">
                                <div class="model_purchase_button">
                                    <div class="button_purchase button_width_all" disabled="disabled" id="button_purchase"><span data-localize="base.purchase">purchase</span></div>
                                </div>
                            </div>
						</div>
						<div class="model_purchase_1 ul_self_record services_item_inner-1">
							<div class="model_purchase_left" id="lottery_self_record">
								<ul class="">
                                    <li style="display: none">
                                        <div class="model_purchase_record">
                                            <div class="lottery_play_div_element_4 lottery_play_div_element_border_0">
                                                <div class="span_element_1 luckNum_1"></div>
                                            </div>
                                            <div class="lottery_play_div_element_4 lottery_play_div_element_border_1">
                                                <div class="span_element_1 luckNum_2"></div>
                                            </div>
                                            <div class="lottery_play_div_element_4 lottery_play_div_element_border_2">
                                                <div class="span_element_1 luckNum_3"></div>
                                            </div>
                                            <div class="lottery_play_div_element_4 lottery_play_div_Multiple">
                                                <span class="span_element_1 multiple">1<span data-localize="base.spendAFewLater"> Bet</span></span>
                                            </div>
                                            <div class="lottery_play_div_element_4 lottery_play_div_Multiple"><span class="span_element_1 luckTotal" >0 ETH</span></div>
                                            <div class="lottery_play_div_element_4 lottery_play_div_Multiple"><span class="span_element_1 createTime">00-00-00 00:00:00</span></div>
                                            <div class="lottery_play_div_element_4 lottery_play_div_Multiple"><span class="span_element_1 status_dispose"></span></div>
                                        </div>
                                    </li>
                                </ul>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- rule -->
			<div class="lottery_item rules">
				<div class="service_item_content">
					<div class="service_item_title">
						<h2 data-localize="base.rules">Rules</h2>
					</div>
				</div>
				<div id="rules_content">

				</div>
			</div>
			<!-- Lottery record -->
			<div class="lottery_item drawArchive">
				<div id="the_lottery_record_id" class="service_item_content">
					<div class="service_item_title">
						<h2 data-localize="base.drawArchive">Draw archive</h2>
					</div>
					<ul class="ul_draw_archive services_item_inner-1" id="lottery_record">
						<li class="lotteryRecord" onclick="getLotteryDetail(this)">
							<div class="lotteryIssue">#0</div>
							<div>
								<div class="model_purchase_record">
									<div class="lottery_play_div_element_4 lottery_play_div_Multiple lottery_record_str">
										<span class="span_element_1 luckNumStr"></span>
									</div>
									<div class="lottery_play_div_element_4 lottery_play_div_element_border_0">
										<!--<span class="span_element_1 luckNum_1">0</span>-->
                                        <div class="span_element_1 luckNum_1" ></div>
									</div>
									<div class="lottery_play_div_element_4 lottery_play_div_element_border_1">
										<!--<span class="span_element_1 luckNum_2">0</span>-->
                                        <div class="span_element_1 luckNum_2"></div>
									</div>
									<div class="lottery_play_div_element_4 lottery_play_div_element_border_2">
										<!--<span class="span_element_1 luckNum_3">0</span>-->
                                        <div class="span_element_1 luckNum_3"></div>
									</div>
									<div class="lottery_play_div_element_4 lottery_play_div_Multiple lottery_record_str">
										<span class="span_element_1 luckTotalStr"></span>
									</div>
									<div class="lottery_play_div_element_4 lottery_play_div_Multiple">
										<span class="span_element_1 luckTotal">0 ETH</span>
									</div>
									<div class="lottery_play_div_element_4 lottery_play_div_time">
										<span class="span_element_1 lotteryTime">00-00-00 00:00:00 ~ 00-00-00 00:00:00</span>
									</div>
								</div>
							</div>
							<hr>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div class="lottery_winning_record" style="display: none;">
		<div class="layer_open_lottery_issue services_item_inner-1">
			<div class="lottery_winning_record_head">
				<p class="p_content_center"><span class="issue p_content_center_left">#5</span> <span class="p_content_center_right" data-localize="base.drawArchive"></span></p>
				<p class="p_content_center luckNum"> 1 2 3</p>
				<p class="p_content_center time">00-00-00 00:00:00 ~ 00-00-00 00:00:00</p>
			</div>
			<hr>
			<ul class="lottery_winning_record_ul">
				<li>
					<!--<p><span class="memberName">on</span> </p>-->
					<p><span class="email">on@xx.xx</span></p>
					<P><span class="luckNum span_right"> 0ETH</span> <span class="multiples"> 0 Multiples </span> </P>
					<hr>
				</li>
			</ul>
		</div>
	</div>
	<!-- commonality fotter -->
	<%
	include("../common/bottom.html"){}
	%>
	<div id="playPassword" style="display: none;">
		<div style="margin: 30px;">
			<div>
				<input type="password" class="paymentCode" placeholder="payment code">
			</div>
			<div class="model_purchase_button">
				<div class="button_purchase confirm" onclick="paymentCodeConfirm()"><span data-localize="base.confirm">confirm</span></div>
			</div>
		</div>
	</div>

	<div class="layer_open_to_receive" style="display: none">
		<div class="to_receive_head">
			<p data-localize="base.dividendsReceive">Dividends receive</p>
			<hr>
		</div>
		<div class="to_receive_content">
			<ul class="receive_content_list services_item_inner-1">
				<li class="receive_content_detail">
					<p class="time_period"><span class="issue span_right">#26</span> <span class="time">00-00-00 00:00:00 ~ 00-00-00 00:00:00</span></p>

					<div class="receive_detail_left">
						<p><input class="total total_1 span_right"><!--<span class="total_1 span_right">500</span>--> <span class="explain explain_1"></span></p>
						<p><input class="total total_2 span_right"><!--<span class="total_2 span_right">500</span>--> <span class="explain explain_2"></span></p>
					</div>
					<div class="receive_detail_right">
						<p><span class="explain_3"></span></p>
						<p><span class="count_down"><span class="time_hour">00</span>:<span class="time_minute">00</span>:<span class="time_second">00</span></span></p>
					</div>
				</li>
			</ul>
		</div>
	</div>


</div>
</body>
</html>